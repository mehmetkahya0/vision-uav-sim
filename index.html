<!DOCTYPE html>
<html lang="tr">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>AI UAV SIMULATOR</title>
  <link rel="stylesheet" href="/src/styles.css" />
  <!-- TensorFlow.js and COCO-SSD for object detection -->
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow/tfjs@4.10.0/dist/tf.min.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@tensorflow-models/coco-ssd@2.2.3/dist/coco-ssd.min.js"></script>
</head>
<body>
  <!-- Ana Cesium sahne -->
  <div id="cesiumContainer"></div>

  <!-- Drone kamera görüntüsü (PiP) -->
  <div id="droneCameraContainer" class="pip">
    <div id="droneCameraView"></div>
    <div id="cameraOverlay">
      <span id="cameraLabel">DRONE CAM</span>
      <span id="aiStatusBadge" class="ai-badge ai-off">AI OFF</span>
      <button id="toggleCameraSize" title="Tam Ekran / Küçült">⛶</button>
    </div>
    <div id="cameraHUD">
      <div id="crosshair">+</div>
    </div>
  </div>

  <!-- ═══ AI DETECTION PANELİ ═══ -->
  <div id="detectionPanel" class="hidden">
    <div class="det-header">
      <span class="det-icon">◉</span>
      <span id="detectionStatus">AI KAPALI</span>
    </div>
    <div class="det-body">
      <div class="det-row">
        <span>HEDEF: <strong id="detectionCount">0</strong></span>
        <span id="detConfidence" class="det-conf">CONF: 25%</span>
      </div>
      <div class="det-row det-distance">
        <span id="detClosestDistance" class="det-dist">EN YAKIN: --</span>
      </div>
    </div>
    <div class="det-footer">
      <span class="det-key"><kbd>B</kbd> Aç/Kapat</span>
      <span class="det-key"><kbd>N/M</kbd> Hassasiyet</span>
      <span class="det-key"><kbd>G</kbd> Dondur</span>
      <span class="det-key"><kbd>+/-</kbd> Zoom</span>
    </div>
  </div>

  <!-- ═══ UYARI SİSTEMLERİ ═══ -->
  <div id="stallWarning" class="warning-overlay hidden">
    <span>⚠ STALL ⚠</span>
  </div>
  <div id="overspeedWarning" class="warning-overlay overspeed hidden">
    <span>⚠ OVERSPEED ⚠</span>
  </div>

  <!-- ═══ SOL HUD PANELİ (Birincil + İkincil Göstergeler) ═══ -->
  <div id="hud">
    <div class="hud-section">
      <div class="hud-section-title">UÇUŞ VERİLERİ</div>
      <div class="hud-row">
        <span id="hudAltitude">ALT: 0 m</span>
        <span id="hudSpeed">TAS: 0 km/h</span>
      </div>
      <div class="hud-row">
        <span id="hudHeading">HDG: 0° K</span>
        <span id="hudPitch">P:+0.0° R:+0.0°</span>
      </div>
    </div>
    <div class="hud-divider"></div>
    <div class="hud-section">
      <div class="hud-section-title">MOTOR & DİNAMİKLER</div>
      <div class="hud-row">
        <span id="hudThrottle">THR: 65%</span>
        <span id="hudClimbRate">VS: +0.0 m/s</span>
      </div>
      <div class="hud-row">
        <span id="hudGForce">G: 1.0</span>
        <span id="hudAoA">AoA: 0.0°</span>
      </div>
    </div>
    <div class="hud-divider"></div>
    <div class="hud-section">
      <div class="hud-row">
        <span id="hudLat">LAT: 0</span>
        <span id="hudLon">LON: 0</span>
      </div>
      <div class="hud-row">
        <span id="hudBattery">FUEL: 100%</span>
        <span id="hudFlightTime">TIME: 00:00</span>
      </div>
    </div>
  </div>

  <!-- ═══ THROTTLE BAR (Sağ dikey çubuk) ═══ -->
  <div id="throttleBarContainer">
    <div class="throttle-label">THR</div>
    <div class="throttle-track">
      <div id="throttleBarFill" class="throttle-fill"></div>
    </div>
    <div class="throttle-value">0%</div>
  </div>



  <!-- ═══ KONTROL YARDIMI ═══ -->
  <div id="controlsHelp">
    <button id="toggleHelp">?</button>
    <div id="helpPanel" class="hidden">
      <h3>Kontroller - Uçuş Sim</h3>
      <table>
        <tr><td><kbd>W</kbd></td><td>Pitch Down (Burun Aşağı)</td></tr>
        <tr><td><kbd>S</kbd></td><td>Pitch Up (Burun Yukarı)</td></tr>
        <tr><td><kbd>A</kbd></td><td>Roll Left (Sol Kanat Aşağı)</td></tr>
        <tr><td><kbd>D</kbd></td><td>Roll Right (Sağ Kanat Aşağı)</td></tr>
        <tr><td><kbd>Q</kbd></td><td>Yaw Left (Sola Sapma)</td></tr>
        <tr><td><kbd>E</kbd></td><td>Yaw Right (Sağa Sapma)</td></tr>
        <tr><td><kbd>L.Shift</kbd></td><td>Throttle + (Gaz Artır)</td></tr>
        <tr><td><kbd>L.Ctrl</kbd></td><td>Throttle - (Gaz Azalt)</td></tr>
        <tr><td><kbd>R / F</kbd></td><td>Kamera Yukarı / Aşağı</td></tr>
        <tr><td><kbd>T</kbd></td><td>Kamera Sıfırla</td></tr>
        <tr><td><kbd>V</kbd></td><td>Kamera Modu (Takip/Cockpit/Orbit)</td></tr>
        <tr><td><kbd>Mouse</kbd></td><td>Orbit: Sürükle=Dön, Scroll=Zoom</td></tr>
        <tr><td><kbd>C</kbd></td><td>Drone Cam (PiP/Tam Ekran)</td></tr>
        <tr><td><kbd>B</kbd></td><td>AI Detection Aç/Kapat</td></tr>
        <tr><td><kbd>N / M</kbd></td><td>Hassasiyet Azalt/Artır</td></tr>
        <tr><td><kbd>G</kbd></td><td>Görüntü Dondur (5s Freeze)</td></tr>
        <tr><td><kbd>+/-</kbd></td><td>Kamera Zoom In/Out</td></tr>
        <tr><td><kbd>0</kbd></td><td>Zoom Sıfırla</td></tr>
        <tr><td><kbd>Scroll</kbd></td><td>Drone Cam Zoom (fare)</td></tr>
      </table>
      <div class="help-physics-note">
        <small>Fizik: Lift=½ρv²SC<sub>L</sub> | Stall@16°AoA | Koordineli Dönüş</small>
      </div>
    </div>
  </div>

  <!-- ═══ MİNİHARİTA (Gerçek Dünya Haritası) ═══ -->
  <div id="minimapContainer" class="minimap-small" title="Tıkla: Tam harita görünümü">
    <div id="minimapViewer"></div>
    <div id="minimapOverlay">
      <span id="minimapLabel">MAP</span>
      <button id="minimapClose" class="hidden" title="Küçült">✕</button>
    </div>
    <div id="minimapCrosshair">+</div>
    <div id="minimapInfo">
      <span id="minimapCoords"></span>
    </div>
  </div>

  <script type="module" src="/src/main.js"></script>
</body>
</html>
